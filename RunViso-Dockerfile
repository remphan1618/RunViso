# Use the Vast.ai base image with CUDA 12.4 and auto-selected drivers
FROM vastai/base-image:cuda-12.4-auto

# Metadata
LABEL maintainer="remphan1618"
LABEL description="Vast.ai environment - TESTING BASE SUPERVISOR AND PORTAL"

# Set default working directory
WORKDIR /workspace

# --- KasmVNC Installation and Configuration REMOVED for testing ---

# Copy the setup notebook to the workspace
# Using the version modified to show output directly in cells
COPY RunViso-Setup.ipynb /workspace/RunViso-Setup.ipynb
# Ensure workspace files are generally accessible/writable
RUN chmod -R 777 /workspace

# --- KasmVNC Port Exposure REMOVED ---

# --- ENTRYPOINT REVERTED TO BASE IMAGE DEFAULT ---
# ENTRYPOINT ["/opt/instance-tools/bin/entrypoint.sh"] # This is inherited, no need to specify explicitly unless overriding

# Keep the original CMD (which was likely empty or passed to the entrypoint)
# CMD [] # Inherited from base